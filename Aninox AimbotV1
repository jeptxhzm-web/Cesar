-- Load aimbot ONCE
local Aimbot = loadstring(game:HttpGet(
    "https://raw.githubusercontent.com/Exunys/Aimbot-V3/main/src/Aimbot.lua"
))()
Aimbot.Load()

-- Services
local UserInputService = game:GetService("UserInputService")

-- States
local enabled = true       -- P key toggle
local disabled = false     -- Full M+L toggle
local mDown = false
local lDown = false
local comboCooldown = false

-- Update aimbot state
local function UpdateAimbot()
    if Aimbot.Settings then
        Aimbot.Settings.Enabled = enabled and not disabled
        Aimbot.Settings.ShowFOV = enabled and not disabled
    end
end

-- Toggle full ON/OFF
local function ToggleFull()
    disabled = not disabled
    UpdateAimbot()
end

-- Input handlers
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end

    -- Track key presses
    if input.KeyCode == Enum.KeyCode.M then
        mDown = true
    elseif input.KeyCode == Enum.KeyCode.L then
        lDown = true
    elseif input.KeyCode == Enum.KeyCode.P then
        enabled = not enabled
        UpdateAimbot()
    end

    -- Check combo
    if mDown and lDown and not comboCooldown then
        comboCooldown = true
        ToggleFull()
        task.delay(0.3, function() comboCooldown = false end)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.M then
        mDown = false
    elseif input.KeyCode == Enum.KeyCode.L then
        lDown = false
    end
end)
